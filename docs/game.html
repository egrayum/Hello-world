<html>
 <head>
  <title>turtlekins game</title>
  <link rel="stylesheet" type="text/css" href="labs.css"></link>
  <canvas id="gameCanvas" style="background-color: #666; width:100%; height:100%; text-align:center;">
  <script>
   var c = document.getElementById("gameCanvas");
   var ctx = c.getContext("2d");
   var pX = 100;
   var pY = 100;
   var direct;
   var click;
   var screen = 1;
   var coins = 0;
   var room;
   var oldpX;
   var oldpY;
   var layout = [];
   var roomPos;
  // var limit = 9;
   function collision(ifs) {
    if (ifs) {
       pX = oldpX;
       pY = oldpY;
      } else { 
       oldpX = pX;
       oldpY = pY;
      }
   }
   function init() {
    c.width = 800;
    c.height = 600;
    ctx.fillStyle = "#111";
    ctx.font = "20px Arial";
    ctx.fillText("Press space or click to start", 250, 320);
    click = 1;
   }
   c.onmousedown = function clickStuff() {
    if (click == 1) {
     click = undefined;
     window.setInterval(runGame, 20);
    }
   }
   document.addEventListener("keyup", function(event) {
    if (event.keyCode == 37 || event.keyCode == 38 || event.keyCode == 39 || event.keyCode == 40) {
     direct = undefined; 
    }
   })
   document.addEventListener("keydown", function(event) {
    if (event.keyCode == 37) {
     direct = 1;
    } else if (event.keyCode == 38) {
     direct = 2; 
    } else if (event.keyCode == 39) {
     direct = 3;
    } else if (event.keyCode == 40) {
     direct = 4;
    }
   })
   function runGame() {
    ctx.fillStyle = "#666";
    ctx.fillRect(0, 0, c.width, c.height);
    // above ground
    if (screen == 1) {
     ctx.fillStyle = "#DEB887";
     ctx.fillRect(250, 20, 300, 200);
     ctx.fillStyle = "#333";
     ctx.font = "35px Arial";
     ctx.fillText("Shop", 260, 55);
     ctx.fillStyle = "#000";
     ctx.fillRect(600, 400, 180, 180);
     ctx.fillText("Mine", 620, 380);
     if (pX > 560 && pY > 360) {
      screen = 2;
      room = 3;
      roomPos = "1,1";
      pX = 375;
      pY = 275;
     }
    /* if (room == 0) {
      ctx.fillStyle = "#333";
      ctx.fillRect(0, 0, 300, c.height);
      ctx.fillRect(500, 0, 300, c.height);
      collision(pX < 300 || pX > 450);
     } else if (room == 1) {
      ctx.fillStyle = "#333";
      ctx.fillRect(0, 0, 300, c.height); 
      ctx.fillRect(500, 0, 300, 200);
      ctx.fillRect(500, 400, 300, 200);
      collision(pX < 300 || pX > 450 && pY < 200 || pX > 450 && pY > 350);
     } else if (room == 2) { 
      ctx.fillStyle = "#333";
      ctx.fillRect(0, 0, c.width, 200);
      ctx.fillRect(0, 400, c.width, 200);
      collision(pY < 200 || pY > 350);
     }
    } */
     if (room == 3) {
      ctx.fillStyle = "#333"; 
      ctx.fillRect(0, 0, 300, 200);
      ctx.fillRect(500, 0, 300, 200);
      ctx.fillRect(500, 500, 300, 200);
      ctx.fillRect(0, 400, 300, 200);
      collision(pX < 300 && pY < 200 || pX > 450 && pY < 400 || pX > 450 && pY > 400 || pX < 300 && pY > 400);
     }
     
     if (pX < 5) {
      
     } else if (pX > 750) {
      
     } else if (pY < 0) {
      
     } else if (pY > 550) {
      
     }
    
    // for moving the player
    if (direct == 1 && pX - 5 > - 5) {
     pX -= 5;
    } else if (direct == 2 && pY - 5 > - 5) {
     pY -= 5;
    } else if (direct == 2 && pX + 5 < 755) {
     pX += 5;
    } else if (direct == 2 && pY + 5 < 555) {
     pY += 5;
    }
    //player and stats
    ctx.fillStyle = "#111";
    ctx.fillRect(pX, pY, 50, 50);
    ctx.fillStyle = "#fff";
    ctx.font = "20px Arial";
    ctx.fillText("Coins: " + coins, 10, 25);
    ctx.fillText("Room position: " + roomPos, 50, 25);
   }
  </script>
 </head>
 <body onload="init()">
 </body>
<html>
