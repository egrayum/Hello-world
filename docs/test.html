<html>
  <head>
    <canvas id="gameCanvas" style="width: 100%; height: 100%; background: #6e6e6e; text-align: center;"></canvas>
    <script>
    var c = document.getElementById("gameCanvas");
    var ctx = c.getContext("2d");
    var i;
    var j;
    var c;
    var jump = false;
    var interval;
    var jumpheight = 3; // jump height
    var rows = [];
    // map
    rows[0] = ["a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a"];
    rows[1] = ["a","0","a","a","a","a","0","0","0","a","a","0","0","a","a","a","a","a"];
    rows[2] = ["a","0","0","a","a","0","0","0","0","0","0","0","0","0","a","a","a","a"];
    rows[3] = ["a","0","a","a","0","0","a","a","0","a","a","0","a","a","a","a","a","a"];
    rows[4] = ["a","0","0","0","0","0","0","0","0","a","0","0","0","a","0","a","a","a"];
    rows[5] = ["a","a","0","0","0","a","0","0","0","a","0","a","0","0","0","a","a","a"];
    rows[6] = ["a","a","a","0","0","0","0","a","a","a","a","a","a","a","a","a","a","a"];
    rows[7] = ["a","0","a","0","0","0","a","a","0","0","0","0","0","a","a","a","a","a"];
    rows[8] = ["a","a","a","a","0","a","a","a","a","0","a","a","0","a","a","a","a","a"];
    rows[9] = ["a","a","0","0","0","0","0","0","a","0","0","a","0","0","a","a","a","a"];
    rows[10] = ["a","0","0","0","a","a","0","a","a","a","0","a","a","0","a","a","a","a"];
    rows[11] = ["a","0","a","a","a","0","0","a","a","0","0","a","0","0","a","0","a","a"];
    rows[12] = ["a","0","0","0","0","0","a","a","0","0","a","a","0","a","a","0","a","a"];
    rows[13] = ["a","a","0","0","0","0","0","0","0","a","a","a","0","0","0","0","a","a"];
    rows[14] = ["a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a"];
    var p = {
      x: 2,
      y: 1
    }
    function setjump() {
      jump = false;
    }
    function jumpy() {
      jump = true;
      upone();
      window.setTimeout(upone, 75);
      function upone() {
        if (rows[p.y][p.x] == "0") {
          p.y -= 1;
        }
      }
      window.setTimeout(setjump, 200);
    }
    document.addEventListener("keydown", function(event) {
      if (event.keyCode == 37) {
        if (rows[p.y + 1][p.x - 1] == "0") {
          p.x -= 1;
        }
      }
      if (event.keyCode == 39) {
        if (rows[p.y + 1][p.x + 1] == "0") {
          p.x += 1;
        };
      }
      if (event.keyCode == 38 && rows[p.y + 2][p.x] == "a") {
        jumpy();
      }
    })
    function fall() {
      if (rows[p.y + 2][p.x] == "0" && jump == false) {
        p.y += 1;
      }
    }
    function renderCanvas() {
      ctx.fillStyle = "#7192a1";
      ctx.fillRect(0, 0, c.width, c.height);
    }
    function renderMap() {
      ctx.fillStyle = "#000";
      for (i = 0; i < rows.length; i ++) {
        for (j = 0; j < rows[i].length; j++) {
          if (rows[i][j] == "a") {
            ctx.fillStyle = "#000";
            ctx.fillRect(100 + (j * 30), 70 + (i * 30), 30, 30);
          }
        }
      }
      ctx.fillStyle = "#1362a3";
      ctx.fillRect(100 + (p.x * 30), 100 + (p.y * 30), 30, 30);
    }
    function update() {
      renderCanvas();
      renderMap();
    }
    // set canvas size and stuff
    function init() {
      c.width = 800;
      c.height = 600;
      renderCanvas();
      renderMap();
      window.setInterval(update, 20);
      interval = window.setInterval(fall, 100);
    }
    </script>
  </head>
  <body onload="init()">
  </body>
</html>
