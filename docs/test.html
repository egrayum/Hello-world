<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <canvas id="canvas" width="800" height="600" style="background-color: #666; display: block; margin: 0 auto;"></canvas>
    <meta charset="utf-8">
    <title></title>
    <script>
      var c = document.getElementById("canvas");
      var ctx = c.getContext("2d");
      var pinch = 0;
      var caught = 0;
      var k = {
        left: 0,
        right: 0
      }
      var p = {
        x: 385,
        y: 170,
        width: 50,
        height: 50,
        length: 30
      }
      var obj = {
        x: 300,
        y: 0,
        width: 40,
        height: 40
      }
      document.addEventListener("keydown", function(event) {
        if (event.keyCode == 38) {
          window.setInterval(update, 20);
        }
        if (event.keyCode == 37) {
          k.left = 1;
        }
        if (event.keyCode == 39) {
          k.right = 1;
        }
        if (event.keyCode == 16) {
          pinch = 1;
          window.setTimeout(setpinch, 300);
        }
      })
      function setpinch() {
        /* if (caught == 0) {
          pinch = 0;
        } */
      }
      document.addEventListener("keyup", function(event) {
        if (event.keyCode == 37) {
          k.left = 0;
        }
        if (event.keyCode == 39) {
          k.right = 0;
        }
        if (event.keyCode == 16) {
          pinch = 0;
        }
      })
      function init() {
        ctx.fillStyle = "#4661b4";
        ctx.fillRect(0, 0, c.width, c.height);
      }
      function update() {
        ctx.fillStyle = "#4661b4";
        ctx.fillRect(0, 0, c.width, c.height);
        if (k.left == 1) {
          p.x -= 5;
        } else if (k.right == 1) {
          p.x += 5;
        }
         if (pinch == 1) {
          if (obj.x > p.x + 40 && obj.x + obj.width < p.x + 10 && obj.y + obj.height < p.y - p.length && obj.y < p.y - p.length) {
            obj.y += 4;
          } /*else {
            caught = 1;
          }*/
        } else {
          obj.y += 4;
        }
        player();
        obj();
      }
      function player() {
        ctx.fillStyle = "#eee";
        ctx.fillRect(p.x, p.y, p.width, p.height);
        if (pinch == 0) {
          ctx.fillRect(p.x + 5, p.y - p.length, 8, p.length);
          ctx.fillRect(p.x + 37, p.y - p.length, 8, p.length);
        } else {
          ctx.fillRect(p.x + 10, p.y - p.length, 8, p.length);
          ctx.fillRect(p.x + 32, p.y - p.length, 8, p.length);
        }
      }
      function obj() {
        ctx.fillStyle = "#eee";
        ctx.fillRect(obj.x, obj.y, obj.width, obj.height);
      }
    </script>
  </head>
  <body onload="init()">

  </body>
</html>
